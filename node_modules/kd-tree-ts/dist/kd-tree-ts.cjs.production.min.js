"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){this.point=t}return t.prototype.toString=function(){return this.point.toString()},t}(),i=function(){function t(){}return t.contains=function(t,i){for(var n=0;n<i.length;n++)if(i[n]>t[1][n]||i[n]<t[0][n])return!1;return!0},t.intersects=function(t,i){for(var n=0;n<t[0].length;n++)if(t[0][n]>i[1][n]||t[1][n]<i[0][n])return!1;return!0},t.clone=function(t){return[[].concat(t[0]),[].concat(t[1])]},t}(),n=function(){function t(t){this.capacity=t,this.data=[]}var i,n=t.prototype;return n.lessThan=function(t,i){return!!i&&t.priority<i.priority},n.siftUp=function(t){for(;t>0&&this.lessThan(this.data[Math.floor((t-1)/2)],this.data[t]);){var i=Math.floor((t-1)/2),n=[this.data[t],this.data[i]];this.data[i]=n[0],this.data[t]=n[1],t=i}},n.siftDown=function(t){for(var i=this.data.length;2*t+1<i;){var n=t;if(this.lessThan(this.data[n],this.data[2*t+1])&&(n=2*t+1),this.lessThan(this.data[n],this.data[2*t+2])&&(n=2*t+2),n===t)break;var r=[this.data[n],this.data[t]];this.data[t]=r[0],this.data[n]=r[1],t=n}},n.push=function(t){if(this.capacity>this.size)return this.data.push(t),void this.siftUp(this.data.length-1);this.lessThan(this.top,t)||(this.data[0]=t,this.siftDown(0))},(i=[{key:"size",get:function(){return this.data.length}},{key:"values",get:function(){return this.data.map((function(t){return t.value}))}},{key:"top",get:function(){return this.data[0]}},{key:"maxPriority",get:function(){return this.data[0]&&this.data[0].priority}}])&&function(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,i),t}();exports.default=function(){function r(i,n){var r=this;void 0===n&&(n=2),this.points=i,this.dimensions=n,this.root=function i(n,e,o){if(void 0===n&&(n=[]),void 0===e&&(e=0),n.length){var a=e%r.dimensions;n.sort((function(t,i){return t[a]-i[a]}));var s=Math.floor(n.length/2),h=new t(n[s]);return h.parent=o,h.left=i(n.slice(0,s),a+1,h),h.right=i(n.slice(s+1),a+1,h),h}}(i)}var e=r.prototype;return e.insert=function(i){if(!this.root)return this.root=new t(i),this.root;for(var n=this.root,r=0;n;)if(i[r]<n.point[r]){if(r=(r+1)%this.dimensions,!n.left){var e=new t(i);return n.left=e,e.parent=n,e}n=n.left}else{if(r=(r+1)%this.dimensions,!n.right){var o=new t(i);return n.right=o,o.parent=n,o}n=n.right}return n},e.nearest=function(t,i){var r=this;void 0===i&&(i=1);var e=new n(i);return function t(i,n,o){if(n){var a,s,h,u,f=(a=i,s=n.point,Math.sqrt(Math.pow(a[0]-s[0],2)+Math.pow(a[1]-s[1],2)));e.push({value:n.point,priority:f}),i[o]<n.point[o]?(h=n.left,u=n.right):(h=n.right,u=n.left),t(i,h,(o+1)%r.dimensions);var c=function(t,i,n){return Math.abs(i.point[n]-t[n])}(i,n,o);(e.size<e.capacity||c<e.maxPriority)&&t(i,u,(o+1)%r.dimensions)}}(t,this.root,0),e.values},e.rangeSearch=function(t){var n=this,r=[];return this.root?(function e(o,a,s){if(void 0===a&&(a=[[-Infinity,-Infinity],[Infinity,Infinity]]),void 0===s&&(s=0),void 0!==o){var h=o.point;i.contains(t,o.point)&&r.push(h);var u=i.clone(a);u[1][s]=h[s];var f=i.clone(a);f[0][s]=h[s],s=(s+1)%n.dimensions,i.intersects(u,t)&&e(o.left,u,s),i.intersects(f,t)&&e(o.right,f,s)}}(this.root),r):r},r}();
//# sourceMappingURL=kd-tree-ts.cjs.production.min.js.map
